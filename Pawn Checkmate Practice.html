<html>
<head>
<title>Pawn Checkmate Practice</title>
<style>
#board {width: 100vmin; height: 100vmin; display: inline-block; text-align: center; vertical-align: middle; }
#board div {width: 16vmin; height:16vmin; display: inline-block; font-size: 16vmin; vertical-align: middle; line-height: 16vmin; }
.odd {background-color: rgb(181,136,99);}
.even {background-color: rgb(240,217,181);}
.odd.good {background-color: rgb(181,166,99);}
.even.good {background-color: rgb(240,247,181);}
.odd.bad {background-color: rgb(211,106,99);}
.even.bad {background-color: rgb(255,170,166);}
.invalid {cursor: default; }
.good, .bad {cursor: pointer; }
</style>
</head>
<body>
<div id="board" onselectstart="return false">
<script type="text/javascript">
function GoodBoard(i, j, P1, P2, P3, player) {
    var ret =  "545555555557545555555111135555555111111355555111111113555111111111135113131313135713554451111113445555555111135545455111111345555111111113555111111111135111111111111311131313131357134545111111134444555111111345555111111113515111111111131111111111111311111111111113111313131313571345511111111344555111111113515111111111131111111111111311111111111113111111111111131113131313135713511111111113515111111111131111111111111311111111111113111111111111131111111111111311131313131357131111111111131113131313135713131313131357131313131313571313131313135713131313131357135757575757575713131313135713454551111113454541111111134451111111111351111111111113111111111111131113131313135713454111111113464747575353534747575353535347474353535353475353535353534353535353535353535353535357534747435353534754555111111344454111111113445111011111134111111111111311111111111113111313131313571344400111111344444101111113445111111111134101010111111301111111111113111111111111131113131313135713440101111113445111111111135111111111111311111111111113111111111111131111111111111311131313131357135111111111135111111111111311111111111113111111111111131111111111111311111111111113111313131313571311111111111311131313131357131313131313571313131313135713131313131357131313131313571357575757575757131313131357134440011111134440000111111340010101111113011111111111131111111111111311131313131357134440011111134644455111111344455111111113444101111111134411111111111341111111111113111313131313571344444001111344475313131353474303131313534713030313135343130303131353031313131313531353535353535753474303031353474000011111134401011111111340010001111113001101111111130111111111111311131313131357134000000111134005010101111344010101011113011101111111130101010101111301111111111113111313131313571301010101111301511111111113511111111111131111111111111311111111111113111111111111131113131313135713111111111113111313131313571313131313135713131313131357131313131313571313131313135713575757575757571313131313571344400001111344400000011113400000011111130001010101111301111111111113111313131313571344400001111346454111111113445111111111134401011111111344111111111113400101111111130113131313135713444440011113445111111111134401011111111344110001111113401100011111130001011111111301131313131357134440000111134403030313135347030313131353430303031313530313031313135303131313131353035353535353575343030303135343410100011113400101000111130011100111111300010101011113001111111111130113131313135713400000011113400101010111130101010101111301010101011113011111111111130101010101111301131313131357130101010111130113131313135713131313131357131313131313571313131313135713131313131357135757575757575713131313135713444000011113444000000111134000000001111300000000011113000101010111130113131313135713444000011113464541111111134451111111111344111111111113441111111111134001011111111301131313131357134444400111134451111111111344010111111113441100011111134011000111111300010111111113011313131313571344400001111344110111111113440101111111134011011111111300110111111113001111111111130113131313135713400000011113400303030313534303030303135303130303131353030303030313530313131313135303535353535357530303030313530340000001111340000000011113000101010111130011111111111300010101011113011313131313571340000001111340030303031357030303030313570303030303135703030303031357031313131313571357575757575757030303031357034440000111134440000001111340000000011113000000000111130001010101111301131313131357134440000111134655511111111344511111111113441111111111134411111111111340010111111113011313131313571344444001111344511111111113440101111111134411000111111340110111111113000101111111130113131313135713444000011113441111111111134411011111111340110111111113001111111111130011111111111301131313131357134000000111134011011111111340110111111113001111011111130011111111111300111111111113011313131313571300000111111300030303031353030303030313530303030303135303131313131353030303030313530353535353535753030303031353034343434353574343434343535743434343435357434343434353574353535353535753575757575757574343434353574344400001111344400000011113400000000111130000000001111300010101011113011313131313571344400001111346445555555557454555555555574545555555555745555555555557555555555555575557575757575757454555555557444555555111134545455111111345555111111113515111111111131111111111111311131313131357134544511111134445555111111351555111111113115111111111131111111111111311111111111113111313131313571355511111111341555111111113115111111111131111111111111311111111111113111111111111131113131313135713511111111113115111111111131111111111111311111111111113111111111111131111111111111311131313131357131111111111131113131313135713131313131357131313131313571313131313135713131313131357135757575757575713131313135713444551111113444541111111134551111111111351111111111113111111111111131113131313135713454111111113464747475353534744555111111344444101111113445111111111134111111111111311131313131357134440011111134447475757575747544554555557445554455555574455555555555755555555555557555757575757575744444455555744474343535353435111011111134101010111111301111111111113111111111111131113131313135713410101111113415353535353534311111111111311111111111113111111111111131111111111111311131313131357131111111111131153535353535353111111111113111111111111131111111111111311111111111113111313131313571311111111111311535353535357531313131313571313131313135713131313131357131313131313571357575757575757131313131357134743435353534740000111111340010101111113011111111111131111111111111311131313131357134000011111134244444111111344474313131353474000011111134001011101111304111111111113511313131313571344400001111344454111111113444303131313534301011001111300010101011113011111111111131113131313135713400000011113404445545455574447474757575747454445555557445545555555574455555555555755575757575757574444444455574441010101111341030303031353031101110111130101010101111301111111111113111313131313571341010101111341111111111113111313131313531311111111111311111111111113111111111111131113131313135713111111111113111313131313571353535353535753131313131357131313131313571313131313135713575757575757571313131313571340000001111340030303031353030000000111130001010101111301111111111113111313131313571340000001111342444001110113444101111101134403030313135343410111011113400101011101130113131313135713444000000113444101111101134401011111011340030303031353030101100111130001010111011301131313131357134000000001134001000111011340100001110113000303031313530311100111111300010101110113011313131313571300000000011300544444545557445544455555574457474747575747444555455557445555555555574457575757575757444444445557444101010111134101010101111301030303031353035111111111134101010101111301131313131357134101010111134113131313135713131313131357135353535353575313131313135713131313131357135757575757575713131313135713400000000113400000000001130003030303035303400000000113400101010101130113131313135713400000000113424101111101134401011111011344010111111113400303130313530340000111011340030303031357034440000001134401011111011344000001110113400100000111130003030303135303000001110113000303030313570340000000011340110111110113400100011101130011000111111300130303131353030101011101130003030313135703000000000113000100010111130001000101111300110110011113000303030313530311111101111300030313031357030000000111130044444454545744454545555557445555555554574457575757575747444444545457445757575757575744444454545744434343435357434343434353574343434343535743434343435357435353535353575357575757575757434343435357434000000001134000000000011300000000000113000303030303530340000000011340030303031357034000000001134251111111011344010111110113441111111111134011111111111300030303130353034343434353574344400000011344110111110113440100011101134011000111111300110111111113000303031303530343434343535743400000000113401111111101134011000111011300110101111113001111011111130003030313035303434343535357430000000001130011011111111300110111111113001111011111130011111111111300131313031353034343534353574300000001111300000000011113000000000111130001010101111300111111111113000303030313530353535353535753000000011113005757575757575757575757575757575757575757575757575757575757575757575757575757575757575757575757575740000000011340000000000113000000000001130000000000011300030303030353034343434353574340000000011342445555555557444545555111134545555111111341555111111113115111111111131113131313135713454551111113455545555555574545455111111341555511111113115111111111131111111111111311131313131357134545111111134155555555555755555111111113115111111111131111111111111311111111111113111313131313571351111111111311555555555557555111111111131111111111111311111111111113111111111111131113131313135713111111111113115555555555575511111111111311111111111113111111111111131111111111111311131313131357131111111111131157575757575757131313131357131313131313571313131313135713131313131357135757575757575713131313135713454555555557454541111111134451111111111351111111111113111111111111131113131313135713454111111113464747475353534747475757575747474343535353435353535353534353535353535353535353535357534743435353534347544111111340474454555557444351011111134153111111111311531111111113115313131313571343400111111340474101111113015754455555574443010111111301531111111113115311111111131153131313135713430101111113015311111111131157555555555755531111111113115311111111131153111111111311531313131357135311111111131153111111111311575555555557555311111111131153111111111311531111111113115313131313571353111111111311531313131357135757575757575753131313135713531313131357135313131313571357575757575757531313131357134740011111134447444455555744434101111113414311111111131153111111111311531313131357134340011111134244474001111344444301011113404447455455574441031101111341111311111113111353131313571340030001111340474303031353434343030313530347474747575747034303031353031353131313531353535353535753034303031353034003010111134001031001111300454745555557441103110111130111131111111311135313131357130003000111130001030101111301010301011113015547544555574401030101111301111311111113111353131313571301030101111301111311111113111113111111131155575555555755111311111113111113111111131113531313135713111311111113111353131313571313531313135713575757575757571353131313571313531313135713575757575757571353131313571344434001111344400300011113404447444455574441030101111341111311111113111353131313571340030001111342444003410113444000030101134000000311011300545557445457444101035101134113135313135713400003400113404000030101134000000301011300000003100113005544474555574401010311011301131353131357130000030001130003034303035303030343030353030303430303530357474747575747030343130353035353535353575303034303035303410103410113400101030101130011100310011300444547445457445111135101134113135313135713400003400113400101030111130101010301111301010103011113015555575555574401010301111301131353131357130101030111130113135313135713131353131357131313531313571357575757575757131353131357135757575757575713135313135713444003400113444000030001134000000300011300444447444457444101034101134113135313135713400003400113424101110340034400000103000340010111130103000101110311030044455457445744434343435357434000000340034001000103000340000001030003000100000301030001000103110300454555574457444343434353574300000003000300110111030003000101100300030011000103010300110110031103005555545744574443434353535743000000030003000303034303430303030343034303130303430343030303034313430357575747475747434353435357430303034303430340000003511340000000031113000101010311130011111113111300444444475457445353535353575340000003511340030303431357030303034313570303030343135703030303431357035757575757575757575757575757030303431357034440000340034440000003000340000000030003000000000300030044444447445744434343435357434000000340034215511111034344410111110343401111111103430011111111134300000001110353005757575757575740000000034340510111010343400100000103430011000111034300110111111343000000011103530057575757575757000000000343001111111103430011000111034300110110010343001111011113430001010111035300575757575757570000000103430011011111034300110111110343001111011103430011111111134300111111100353005757575757575700000110034300030303035353030303030353530303030303535303131313135353030303030353570357575757575757030303035353034343434353574343434343535743434343435357434343434353574353535353575753575757575757574343434353574344400000034344400000000343400000000003430000000000034300000000000353005757575757575740000000034342555555555113545545555111134545555111111351555111111113115511111111131157131313135713454555511113455545555111134545445111111341555111111113115511111111131155111111111311571313131357134544511111134155555111111351555111111113115511111111131155111111111311551111111113115713131313571355511111111311555111111113115511111111131155111111111311551111111113115511111111131157131313135713551111111113115511111111131155111111111311551111111113115511111111131155111111111311571313131357135511111111131157131313135713571313131357135713131313571357131313135713571313131357135757575757575757131313135713554551111113444545111111134545511111111351551111111113115511111111131157131313135713454451111113464757475353534745545111111340445401111113015155111111131111551111111311135713131357134444411111134047474353535343544511111113004155011111130111551111111311115511111113111357131313571340440111111300475743535353435154011111130101450111111301115511111113111155111111131113571313135713014401111113015357535353535311551111111311115511111113111155111111131111551111111311135713131357131155111111131153575353535353115511111113111155111111131111551111111311115511111113111357131313571311551111111311535753535357531357131313571313571313135713135713131357131357131313571357575757575757135713131357134747434353534744444111111340444401111113015155111111131111551111111311135713131357134444411111134244454441111340474347031353034001451111130001015401111301111155111113111313571313571344404441111340444145011113004303470313530300014401111300010145011113011111551111131113135713135713400044011113004111540111130013134703135303011045111113001101550111130111115511111311131357131357130000440111130011115501111301131357031353031101550111130101015501111301111155111113111313571313571301014401111301111155111113111313571313531311115511111311111155111113111111551111131113135713135713111155111113111313571313571353535753535753131357131357131313571313571313135713135713575757575757571313571313571344444441111340474347031353034000440111130004014401111301511155111113111313571313571344404441111342444101544113404101105501130003030357035303410111445113400101015401130113131357135713444000444113404001004401130001010044011300030303470353030101104511130001010155011301131313571357134000004401130001110144011300111101440113000303034703530311100155111300010101540113011313135713571300000044011300111111550113001111115401130013031347035303010111451113001111115401130113131357135713000000440113000101015511130101010155111301131313571353031111115511130101010155111301131313571357130101015511130113131357135713131313571357135353535753575313131357135713131313571357135757575757575713131357135713444440444113404440004401130043030347035303400000444113400101014401130113131357135713444000444113424101110144434001000101454300010111115443000303130357430340000111445340030303035757034440000044434001010100454300010000004543000100000155430003030303574303000001114453000303030357570340000000444300111111014543001101010145430011000110544300130303035743030101011144530003030313575703000000004443001111110155430011111101554300110111015443000303130357430311111101545300030313035757030000000154430001010111555301010101115553011111111154530113131313575303010101115453011313131357571301010111545301131313135757131313131357571313131313575713535353535757531313131357571357575757575757131313135757134444400044434044400000444300400000004443000303030347430340000000445340030303035757034440000044434251111111005740010111110057001111111101570011111111115700030303130357034343434353574344400000005740110111010057000100000100570011000111015700110111111157000303031303570343434343535743400000000057001111111100570011010111005700110101010157001111011111570003030313035703434343535357430000000000570011111111015700111111110157001111111101570011111111115700131313030357034343534353574300000001015700010101111157010101011111570111111111115701111111111157010303031313570353535353535753010101111157011313131313571313131313135713131313131357131313131313571353535353535753575757575757571313131313571344444000005740444000000057004000000000570000000000005700030303030357034343434353574344400000005742445555555113455545555111134545555111111351555111111113115111111111131113131313135713454545511113455555555111134545455111111341555111111113115111111111131111111111111311131313131357134545511111134155555111111351555111111113115111111111131111111111111311111111111113111313131313571351111111111311555111111113115111111111131111111111111311111111111113111111111111131113131313135713111111111113115111111111131111111111111311111111111113111111111111131111111111111311131313131357131111111111131113131313135713131313131357131313131313571313131313135713131313131357135757575757575713131313135713444545511113454445411111134445551111111351555111111113115111111111131113131313135713444444511113464755455111134457455111111340475101111113015311111111131153111111111311531313131357134744445111134447554111111340474111111113004311011111130153111111111311531111111113115313131313571347400111111340575101111113015311111111130153010111111301531111111113115311111111131153131313135713430101111113015311111111131153111111111311531111111113115311111111131153111111111311531313131357135311111111131153111111111311531111111113115311111111131153111111111311531111111113115313131313571353111111111311531313131357135313131313571353131313135713531313131357135313131313571357575757575757531313131357134744444111134447444111111340474101111113014311111111131153111111111311531313131357134744444111134645574001111344554301011113404113011111130011131101111301111311111113111353131313571344474001111344445300011113404103010111130001030001111300110301011113011113111111131113531313135713444300011113405113010111130011131101111300110301111113011103110111130111131111111311135313131357134003000111130011131101111301111311011113011113111111131111131101111301111311111113111353131313571301030101111301111311111113111113111111131111131111111311111311111113111113111111131113531313135713111311111113111353131313571313531313135713135313131357131353131313571313531313135713575757575757571353131313571344474444511344444740011113404443000111130041030101111301111311111113111353131313571344474001111346455103410113445101030101134001110311011300111113011113000101131101130113135313135713444443400113444111030101134011010301011300010003100113001100030111130001011311011301131353131357134440030001134011110300011300111113000113001101030101130011011301111300111113110113011313531313571340000300011300111113010113011111130101130111111311011301111113011113011111131101130113135313135713010103010113011111131111131111111311111311111113111113111111131111131111111311111311131353131357131111131111131113135313135713131353131357131313531313571313135313135713131353131357135757575757575713135313135713444447400113444444430001134044400300011300400003000113000101030101130113135313135713444443400113464551110340034451010103000340111111130103001111110311030001011113011301131313531357134444400340034441110103000340110101030003001100010301030011000103110300010111130113011313135313571344400003000340111111030003001111110300030011011103010300110111031103001111111301130113131353135713400000030003001111110301030111111103010301111111130103011111110311030111111113011301131313531357130101010301030111111113111311111111131113111111111311131111111113111311111111131113111313135313571311111113111311131313531357131313135313571313131353135713131313531357131313135313571357575757575757131313531357134444444340034444444003000340444000030003004000000300030001010103011301131313531357134444400340034655511111034344510111110343401111111103430011111111134300010111110353011313131353571344444000034344511111010343401101010103430011000111034300110111111343000101111103530113131313535713444000000343401111111103430011111111034300110111010343001111111113430011111111035301131313135357134000000103430011111111034301111111110343011111111103430111111111134301111111110353011313131353571301010111034301111111111353111111111113531111111111135311111111111353111111111113531113131313535713111111111353111313131353571313131313535713131313135357131313131353571313131313535713575757575757571313131353571344444440034344444440000343404440000003430040000000034300010101010353011313131353571344444000034346455555555113455555555111134555555111111351555111111113115111111111131113131313135713444545555113455555555111134555555111111341555111111113115111111111131111111111111311131313131357134545511111134455555111111351555111111113115111111111131111111111111311111111111113111313131313571345511111111351555111111113115111111111131111111111111311111111111113111111111111131113131313135713511111111113115111111111131111111111111311111111111113111111111111131111111111111311131313131357131111111111131113131313135713131313131357131313131313571313131313135713131313131357135757575757575713131313135713444545555113454444455111134445555111111351555111111113115511111111131153131313135713444444545113464555455111134455555111111344555111111113415111111111131111111111111311131313131357134445445111134445554111111344555111111113405111011111130111111111111311111111111113111313131313571344454111111344555111111113415111111111130111111111111311111111111113111111111111131113131313135713445101111113415111111111131111111111111311111111111113111111111111131111111111111311131313131357135111111111131111111111111311111111111113111111111111131111111111111311111111111113111313131313571311111111111311131313131357131313131313571313131313135713131313131357131313131313571357575757575757131313131357134444444551134444444451111344444541111113415551111111131151111111111311131313131357134444444111134655554111111344555111111113445111111111134011111111111301111111111113111313131313571344444441111344455101011113445111110111134011010101111300110111111113011111111111131113131313135713444440011113445111110111134111111101111301111111111113011111111111130111111111111311131313131357134441010111134111111111111311111111111113111111111111131111111111111311111111111113111313131313571351111111111311111111111113111111111111131111111111111311111111111113111111111111131113131313135713111111111113111313131313571313131313135713131313131357131313131313571313131313135713575757575757571313131313571344444444511344444444411113444444410111134045411101111301511111111113111313131313571344444441111346555541110113445551111101134451111111111340111111111113011111111111131113131313135713444444400113444551010001134451111100011340110101011113001101111111130111111111111311131313131357134444400001134451111101011341111111010113011111111111130111111111111301111111111113111313131313571344410101011341111111111113111111111111131111111111111311111111111113111111111111131113131313135713511111111113111111111111131111111111111311111111111113111111111111131111111111111311131313131357131111111111131113131313135713131313131357131313131313571313131313135713131313131357135757575757575713131313135713444444444113444444444001134444444000011340444101010113015111111111131113131313135713444444400113465555511101134455511111011344511111111113401111111111130111111111111311131313131357134444444001134455511100011344511111000113401101110111130011011111111301111111111113111313131313571344444000011344511111010113411111110101130111111111111301111111111113011111111111131113131313135713444101010113411111111111131111111111111311111111111113111111111111131111111111111311131313131357135111111111131111111111111311111111111113111111111111131111111111111311111111111113111313131313571311111111111311131313131357131313131313571313131313135713131313131357131313131313571357575757575757131313131357134444444441134444444440011344444440000113404441010101130151111111111311131313131357134444444001134655555111011344555111110113445111111111134011111111111301111111111113111313131313571344444441011344555111010113445111110101134011011111111300110111111113011111111111131113131313135713444440010113445111111101134111111111011301111111111113011111111111130111111111111311131313131357134441011101134111111111111311111111111113111111111111131111111111111311111111111113111313131313571351111111111311111111111113111111111111131111111111111311111111111113111111111111131113131313135713111111111113111313131313571313131313135713131313131357131313131313571313131313135713575757575757571313131313571344444444411344444444400113444444400001134044410101011301511111111113111313131313571344444440011346"
[j*4116+i*686+P1*98+P2*14+P3*2+player];
    return (player?[0,1,0,2]:[1,0,2,0])[ret&3];
}
var Ky=5, Kx=2, P1=0, P2=0, P3=0, player=0;
var History = [];
for (var i=0; i<6; ++i) for (var j=0; j<6; ++j) {
    document.write ('<div id="b' + i + j + '" onclick="foo(' + i + ',' + j + ')"></div>');
}
function foo(i, j) {
    if (document.getElementById('b'+i+j).classList.contains('invalid')) return;
    History.push ([Ky, Kx, P1, P2, P3, player]);
    if (player) {
        switch (j) {
        case 1: P1=i; break;
        case 2: P2=i; break;
        case 3: P3=i; break;
        }
        moves.innerHTML += 'abcd'[j]+(i+1)+'    <br>';
    } else {
        Ky = i;
        Kx = j;
        switch (j) {
            case 1: if (P1==i) { P1=6; } break;
            case 2: if (P2==i) { P2=6; } break;
            case 3: if (P3==i) { P3=6; } break;
        }
        moves.innerHTML += 'K'+'abcdef'[j]+(i+1)+'       ';
    }
    
    player ^= 1;
    repaint();
}
function fooUndo() {
    var t = History.pop();
    if (t) {
        moves.innerHTML = moves.innerHTML.slice(0,-10);
        Ky = t[0], Kx = t[1], P1 = t[2], P2 = t[3], P3 = t[4], player = t[5];
    }
    repaint();
}
function repaint() {
    for (var i=0; i<6; ++i) for (var j=0; j<6; ++j) {
        var c = Ky==i && Kx==j ? '<span style="color: #ffffff;">&#9818;</span>' : '';
        var o = document.getElementById('b'+i+j);
        switch (j) {
        case 1: if (P1==i) { c=i==5?'&#9819;':'&#9823;'; } break;
        case 2: if (P2==i) { c=i==5?'&#9819;':'&#9823;'; } break;
        case 3: if (P3==i) { c=i==5?'&#9819;':'&#9823;'; } break;
        }
        o.innerHTML = c || '&nbsp;';
        var d = 2;
        if (player) {
            if(i!=Ky || j!=Kx) switch (j) {
            case 1: if (P1==i-1 || P1==0 && i==2) d=GoodBoard(Ky, Kx, i, P2, P3, 0); break;
            case 2: if (P2==i-1 || P2==0 && i==2) d=GoodBoard(Ky, Kx, P1, i, P3, 0); break;
            case 3: if (P3==i-1 || P3==0 && i==2) d=GoodBoard(Ky, Kx, P1, P2, i, 0); break;
            }
        } else {
            if (i>=Ky-1 && i<=Ky+1 && j>=Kx-1 && j<=Kx+1 && (Ky!=i || Kx!=j)) {
                d=GoodBoard(i, j, i==P1&&j==1?6:P1, i==P2&&j==2?6:P2, i==P3&&j==3?6:P3, 1);
            }
        }
        o.classList = 
            (i+j&1?'even ':'odd ') +
            (['good','bad','invalid'][d]);
    }
}
repaint();
</script>
</div>
<div id="moves" style="display: inline-block; width: 120px; vertical-align: top;" >
<input type="button" value="Undo" onclick="fooUndo()"><br>
</div>
</body>
</html>
<!-- Generator
#include <stdio.h>
#define L7(i) for(i=0; i<7; ++i)
#define L6(i) for(i=0; i<6; ++i)
#define L5(i) for(i=0; i<5; ++i)
const int Kwin = '0', Pwin = '1', ByDef = 2;
int Unused = 4, UUWr = 0;
#define stype char
stype S[6][6][7][7][7][2]; // Kx Ky P1 P2 P3 Mover(0=K 1=P)
stype solve(int Kx, int Ky, int P1, int P2, int P3, int Mover) {
    stype& res0 = S[Kx][Ky][P1][P2][P3][Mover], res;
    int i, j, k;
    if (res0 &= ~Unused) return res0 & ~ByDef & ~4;
    if (Mover==0) {
        res = Pwin;
        L6(i) L6(j) {
            k = (i-Kx)*(i-Kx) + (j-Ky)*(j-Ky);
            if (k<1 || k>2) continue;
            if (solve(i, j,
                i==1&&j==P1?6:P1,
                i==2&&j==P2?6:P2,
                i==3&&j==P3?6:P3, 1)==Kwin) res=Kwin;
        }
    } else {
        res = Kwin;
        if ((Kx!=1 || Ky!=P1+1) && P1!=6) {
            if(solve(Kx, Ky, P1+1, P2, P3, 0)==Pwin) res=Pwin;
            if(Kx!=1 || Ky!=2) if(P1==0 && solve(Kx, Ky, 2, P2, P3, 0)==Pwin) res=Pwin;
        }
        if ((Kx!=2 || Ky!=P2+1) && P2!=6) {
            if(solve(Kx, Ky, P1, P2+1, P3, 0)==Pwin) res=Pwin;
            if(Kx!=2 || Ky!=2) if(P2==0 && solve(Kx, Ky, P1, 2, P3, 0)==Pwin) res=Pwin;
        }
        if ((Kx!=3 || Ky!=P3+1) && P3!=6) {
            if(solve(Kx, Ky, P1, P2, P3+1, 0)==Pwin) res=Pwin;
            if(Kx!=3 || Ky!=2) if(P3==0 && solve(Kx, Ky, P1, P2, 2, 0)==Pwin) res=Pwin;
        }
    }
    //if (UUWr & 8) getchar();
    //fprintf(stderr, "}\n", Kx,Ky,P1,P2,P3,Mover);
    return res0 = res | UUWr;
}
int main() {
    int i, j, k, l, m;
    L6(i) L6(j) S[i][j][6][6][6][1] = Kwin | Unused | ByDef; // No pawn left
    L7(i) L7(j) L5(k) for(l=0; l<3; l+=2)
        S[l+0][k+1][k][i][j][1] =
        S[l+1][k+1][i][k][j][1] =
        S[l+2][k+1][i][j][k][1] = Pwin | Unused | ByDef; // King die
    L6(i) L6(j) L7(k) L7(l) {
        S[i][j][5][k][l][1] = 
        S[i][j][k][5][l][1] = 
        S[i][j][k][l][5][1] = Pwin | Unused | ByDef; // Having queen
    }
    printf ("%d!", solve(2, 5, 0, 0, 0, 0));
    UUWr = Unused; Unused = 0; 
    L6(i) L6(j) L7(k) L7(l) L7(m) solve(i,j,k,l,m,0), solve(i,j,k,l,m,1);
    printf("%c",S[2][2][0][6][3][0]);
    printf("%c",S[3][3][0][6][6][1]);
    {
        FILE* fp = fopen("chess.3pawn", "wb");
        fwrite (S, sizeof(S), 1, fp);
        fclose(fp);
    }
}
-->
